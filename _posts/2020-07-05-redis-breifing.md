---
title: Redis 简介
tags: ["Redis"]
---

Redis 简介
---

Redis是一个远程内存数据库，它不仅性能强劲，而且还具有复制特性以及为解决问题而生的独一无二的数据模型。Redis提供了5种不同类型的数据结构，各式各样的问题都可以很自然地映射到这些数据结构上。通过复制、持久化和客户端分片等特性，用户可以很方便地将 Redis 扩展成一个能包含数百 GB 数据、每秒处理上百万次请求的系统。

# 1. Redis 简介 #

Redis 是一个速度非常快的非关系型数据库，它可以存储键（key）与5种不同类型的值（value）值之间的映射。还可以将存储在内存的键值对数据持久化到硬盘，可以使用复制特性来扩展读性能，使用客户端分片来扩展写性能。

## 1.1. Redis 数据库和其他非关系型数据库的对比 ##

|  名称   | 类型  | 数据存储选项| 查询类型 | 附加功能|
|---------|---------|------------|---------|---------|
| Redis   | 使用内存存储的非关系型数据库 |字符串、列表、集合、散列表、有序集合|每种数据类型都有自己的专属命令，另外还有批量操作和不完全的事务支持|发布订阅、主从复制、持久化、客户端分片、脚本|
| Memcached| 使用内存存储的键值缓存 |键值之间的映射|创建、读取、更新、删除等|为提升性能而设的多线程服务器|
| MongoDB | 使用硬盘存储的非关系型文档存储|每个数据库包含多个表，每个表可以包含多个无schema的BSON文档|创建、读取、更新、删除等|支持map-reduce、主从复制、分片、空间索引|

## 1.2. 附加特性 ##
对于内存数据库，首先要考虑的问题是“当服务器被关闭时，服务器内存储的数据将何去何从？”

Redis 拥有两种不同形式的持久化方法：第一种方法为时间点转储（point-in-time dump）简称 RDB 持久化，即可以在指定的时间间隔内生成数据集的时间点快照。第二种是 AOF 持久化，Redis执行的每次写命令记录到单独的日志文件中，当Redis重启时再次执行AOF文件中的命令来恢复数据

Redis 的主从复制特性：执行复制的从服务器会连接上主服务器，接受主服务器发送的整个数据库的初始副本。之后主服务器执行的写命令都会发送给从服务器执行，从服务器的数据也会不断更新。客户端可以向任意的从服务器发送读请求，避免对主服务器的集中访问。

# 2. 数据结构 #
|结构类型|结构存储的值|结构的读写能力|
|---------|---------|------------|
|STRING|可以是字符串、整数、浮点数|对整个字符串或者字符串中的其中一部分执行操作：对整数和浮点数执行自增（increment）或者自减（decrement）操作|
|LIST|一个链表，链表上的每个节点都包含了一个字符串|从链表的两端推入或者弹出元素：根据偏移量对链表进行修剪(trim)；读取单个或者多个元素；根据值查找或者移除元素|
|SET|包含字符串的无序集合（unordered collection），并且被包含的每个字符串都是唯一的|添加、获取、移除单个元素；检查一个元素是否存在于集合中；计算交集、并集、差集；从集合里面随机获取元素|
|ZSET|字符串成员（member）与浮点数分值之间的有序映射，元素的排序由分值决定|添加、获取、移除单个元素；根据分值范围或者成员来获取元素|
|HASH|包含键值对的无序散列表|添加、获取、移除单个键值对；获取所有键值对|

以下简单介绍几个命令，为了方便测试，推荐使用 [Try Redis](https://try.redis.io/)。

## 2.1. STRING ##
- SET 设置存储在给定键中的值
- GET 获取存储在给定键中的值
- DEL 删除存储在给定键中的值（这个命令可以用于所有类型）

## 2.2. LIST ##
- LPUSH/RPUSH 将给定的值推入列表的左/右端
- LRANGE      获取列表在给定范围上的所有值
- LINDEX      获取列表在给定位置上的单个元素
- LPOP/RPOP   从列表的左/右端弹出一个值，并返回被弹出的值

## 2.3. SET ##
Redis 的集合和列表都可以存储多个字符串，他们之间的不同在于列表可以存储多个相同的字符串，而集合每个元素都是唯一的，集合用散列表实现，把字符串放在键中存储保持唯一性。

- SADD 将给定元素添加到集合
- SMEMBERS 返回集合中的所有元素
- SISMEMBER 检查给定元素是否存在于集合中，如果集合中元素太多，该命令可能会很慢，谨慎使用
- SREM 如果给定的元素存在于集合中，那么移除这个元素

还可以用SINERT\SUNION\SDIFF这三个命令执行常见的交集、并集、差集运算。

## 2.4. HASH ##
- HSET 在散列表里关联给定的键值对
- HGET 获取指定键所对应的值
- HGETALL 获取散列包含的所有键值对
- HDEL 如果给定键存在于散列里面，那么移除这个键

## 2.5. ZSET ##
有序集合也是存储键值对：有序集合的键成为成员，值称为分值。
- ZADD 将一个带有给定分值的成员添加到有序集合里面
- ZRANGE 根据元素在有序排列中所处的位置，从有序集合面获取多个元素
- ZRANGEBYSCORE 获取有序集合在给定分值范围内的所有元素
- ZREM 移除给定成员
